---
layout: post
title: "Regular Expression"
date: 2016-05-20
categories: regular
---

* 目录
{:toc #regex}

#PHP正则表达式

###一.php正则表达式的基础语法
* 定界符
* 原子

1. 除了字母、数字和反斜线\以外的任何字符都可以为定界符号，比如 | |、//、{}、!!等等，但是需要注意，如果没有特殊需要，我们都使用正斜线//作为正则表达式的定界符号
2. 正则表达式的构成：/原子和元字符/模式修正符号(如:i表示不区分大小写)

###二.php中的preg与ereg
* preg，代表“Perl的正则表达式（Perl Regular Expressions）”。
* ereg，代表“扩展的正则表达式(Extended Regular Expressions)”。
(ereg 被preg取代)

####区别
1. preg_replace()里面的正则可以写成型如："/..../"而ereg_replace()里面的正则需写成型如".....", ereg中不需要**定界符**和**修饰符**;
2. preg的速度要远远比ereg快


***

###三.正则表达式组成
* 定界符
* 原子
* 元字符
* 量词
* 边界控制
* 模式单元

#### 1.定界符
"/" 在php中表示正则表达式的开始和结束。

#### 2.原子
一个原子对应UNICODE中的一个字符(直接表示的|需要转义表示的)
* 可见的原子
    - 标点
    - 英文字母及数字
    - 汉字、韩文等
    - 数理化公式
*不可见原子
    - 换行符、制表符等...

#### 3.元字符
* 定义原子的__筛选__方式
    - | 匹配两个或多个分支选择
    - [] 匹配其中任意一个
    - [^]
* 定义原子的集合(\d \D \s \S)

#### 4.量词
{n}  {n,}  {n,m}  *  +  ?

#### 5.边界控制
^ $  匹配字符串的开始和结尾。
>注意与定界符的不同,定界符只是php中表示正则表达式开始结尾的字符串
而边界控制符是对匹配字符串的限制，如:  
匹配`^hello world`  
`hello world`  则可以匹配到，而`   hello world`不能被匹配到，因为后一个不是以hello
开头的  
匹配`hello world$`  
`hello world`  则可以匹配到，而`hello world   `不能被匹配到，因为后一个不是以world
结尾的

#### 6.模式单元
()，将括号内的内容作为一个原子，preg_math的第二个数组中会返回()中匹配到的内容

###四.模式修正
在/pattern/ 后面用于对整个正则表达式进行限制
1. /pattern/i  pattern中的字母不区分大小写，匹配的字符串大小写均可
2. /pattern/U  使用懒惰模式匹配(默认使用贪婪模式匹配)
    如：`$pattern = /hello\.+123/U $subject = hello_123123123, 使用懒惰模式则会尽可能少的匹配，结果为hello_123，而默认贪婪模式则会尽可能多的匹配结果为hello_123123123`
....

###五.常见正则表达式
1.非空匹配('required')  
    `.+`: .表示非\n字符串，.+表示一个或多个非空字符串

2.两位浮点数  
    `^(0|[1-9]\d*)\.\d{2}$`: 两点注意，一是以0开头那么后面接. 不匹配0123.23这种类型，而一定要有边界定位符，没有^，0123.23这种可以匹配，匹配结果是123.23，没有$，那么可以匹配两位以上的任意为小数

3.email  
    `^\w+(\.\w)*@\w+(\.\w)+$`: 前面(\.\w)* 匹配 zhangsan.Mr@sina.com.cn 这类前面有点的邮箱，后面(\.\w)+匹配有多级域名的情况

4.URL  
    `^(https?://)?\w+(\.\w)+$`: 匹配http(s) 也可以没有http(s)
